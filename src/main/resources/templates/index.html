<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
    <title>Convert coordinates</title>
    <style>
        #map {
            height: 400px;
            width: 50%;
        }
    </style>
</head>
<body>
<div>
    <div style="float: left; width:50%">
        <form style="padding: 10px" action="/" method="post">

            <h3>Wprowadź koordynaty:</h3>
            <textarea th:text="${@converter.originalCoordinates}" rows="4" style="width: 100%; height: 250px"
                      type="text"
                      name="coordinates"></textarea><br>
            <button>Konwertuj</button>
            <input name="order" type="checkbox" value="change"> zamień kolejność lat/long
        </form>
    </div>
    <div style="float: left; width:50%" id="map"></div>
</div>
<div>

    <div style=" padding: 10px; float: left; width:50%">
        <H3 th:text="${message}"></H3>

        <p th:text="${'Długość geometrii: '+@converter.length + 'm.'}"></p>

        <h4>WKT </h4>
        <p th:text="${@converter.geometry}"></p>

        <h4>WGS 84</h4>
        <p th:text="${@converter.wgsCoordinates}"></p>

        <h4>Geometria XML</h4>
        <p th:text="${@converter.xmlCoordinates}"></p>

        <h4>Geometria CoreDB</h4>
        <p th:text="${@converter.coreDBCoordinates}"></p>

        <h4>Koordynaty dla Cartopii</h4>
        <div th:each="item : ${@converter.cartopiaCoordinates}">
            <p th:text="${item}"></p>
        </div>
    </div>
</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        osmAttrib = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        osm = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});

    var map = L.map('map').addLayer(osm);

    var latlngs = /*[[${@converter.lineOnMap}]]*/;

    var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);
    map.fitBounds(polyline.getBounds());
    /*]]>*/

</script>
</body>
</html>